<nav style="background: #111; color: white; padding: 15px;">
  <ul id="navMenu" style="list-style: none; display: flex; gap: 15px; margin: 0; padding: 0;">
    <!-- Popolato dinamicamente -->
  </ul>
</nav>

<script>
  const userId = localStorage.getItem('userId');
  const navMenu = document.getElementById('navMenu');

  if (userId) {
    fetch('/profile-data?email=' + encodeURIComponent(userId))
      .then(res => res.json())
      .then(data => {
        navMenu.innerHTML = `
          <li><a href="/index.html" style="color: white; text-decoration: none;">Home</a></li>
          <li><a href="/feed.html" style="color: white; text-decoration: none;">Feed</a></li>
          <li><a href="/creator.html" style="color: white; text-decoration: none;">Creator</a></li>
          <li><a href="/profile.html" style="color: white; text-decoration: none;">Profilo</a></li>
          ${data.role === 'admin' ? '<li><a href="/admin.html" style="color: white; text-decoration: none;">Admin</a></li>' : ''}
          <li><a href="#" onclick="logout()" style="color: white; text-decoration: none;">Logout</a></li>
        `;
      })
      .catch(() => {
        navMenu.innerHTML = `
          <li><a href="/index.html" style="color: white; text-decoration: none;">Home</a></li>
          <li><a href="/login.html" style="color: white; text-decoration: none;">Accedi</a></li>
          <li><a href="/signup.html" style="color: white; text-decoration: none;">Registrati</a></li>
        `;
      });
  } else {
    navMenu.innerHTML = `
      <li><a href="/index.html" style="color: white; text-decoration: none;">Home</a></li>
      <li><a href="/login.html" style="color: white; text-decoration: none;">Accedi</a></li>
      <li><a href="/signup.html" style="color: white; text-decoration: none;">Registrati</a></li>
    `;
  }

  function logout() {
    localStorage.removeItem('userId');
    window.location.href = '/login.html';
  }
</script>
